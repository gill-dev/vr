(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{171:function(e,t,n){Promise.resolve().then(n.bind(n,5007)),Promise.resolve().then(n.bind(n,912)),Promise.resolve().then(n.bind(n,1481))},5007:function(e,t,n){"use strict";n.r(t);var r=n(7437),i=n(2265),l=n(7776);t.default=()=>{let e=(0,i.useRef)(null),t=(0,i.useRef)(null),a=(0,i.useRef)(null),o=(0,i.useRef)([]),[s,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let r;return(async()=>{let i=await Promise.resolve().then(n.bind(n,7776)),{GLTFLoader:l}=await n.e(938).then(n.bind(n,9938)),{ARButton:c}=await n.e(6).then(n.bind(n,4006)),u=(e,t)=>{let n=new i.Box3().setFromObject(e).getSize(new i.Vector3);e.scale.multiplyScalar(t/n.y);let r=new i.Box3().setFromObject(e).getCenter(new i.Vector3);e.position.set(-r.x,-r.y,-r.z)},d=(e,t)=>{e.traverse(e=>{e instanceof i.Mesh&&e.material&&(e.material.transparent=!0,e.material.opacity=t)})},f=new i.Scene,h=new i.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.01,20);e.current=f,t.current=h;let m=new i.HemisphereLight(16777215,12303359,1);f.add(m);let w=new i.WebGLRenderer({antialias:!0,alpha:!0});w.setPixelRatio(window.devicePixelRatio),w.setSize(window.innerWidth,window.innerHeight),w.xr.enabled=!0,a.current=w;let p=c.createButton(w,{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay"],domOverlay:{root:document.body}});document.body.appendChild(w.domElement),document.body.appendChild(p);let b=new l;for(let e of[{name:"coffee-table",height:.5},{name:"chair",height:.7},{name:"cushion",height:.05}]){let t=await b.loadAsync("/models/artwork_173307_1_full.gltf");u(t.scene,e.height);let n=new i.Group;n.add(t.scene),n.visible=!1,d(n,.5),o.current.push({...e,model:n}),f.add(n)}w.xr.addEventListener("sessionstart",async()=>{let e=w.xr.getSession();if(e){var t;let n=await e.requestReferenceSpace("viewer"),r=await (null===(t=e.requestHitTestSource)||void 0===t?void 0:t.call(e,{space:n}));w.setAnimationLoop((e,t)=>{if(!t)return;let n=r?t.getHitTestResults(r):[];if(n.length>0&&s){let e=n[0],t=w.xr.getReferenceSpace();if(t){let n=e.getPose(t);n&&(s.visible=!0,s.position.setFromMatrixPosition(new i.Matrix4().fromArray(n.transform.matrix)))}}w.render(f,h)})}}),r=()=>{a.current&&a.current.dispose()}})(),()=>{r&&r()}},[s]);let f=e=>{o.current.forEach((t,n)=>{t.model.visible=n===e}),c(o.current[e].model),d(!1)},h=()=>{d(!0),s&&(s.visible=!1),c(null)};return(0,r.jsxs)("div",{children:[u&&(0,r.jsx)("div",{id:"item-buttons",children:o.current.map((e,t)=>(0,r.jsx)("button",{onClick:()=>f(t),children:e.name},t))}),!u&&(0,r.jsxs)("div",{id:"confirm-buttons",children:[(0,r.jsx)("button",{onClick:()=>{if(s&&e.current){let t=s.clone(!0);t.traverse(e=>{e instanceof l.Mesh&&e.material&&(e.material=e.material.clone(),e.material.transparent=!0,e.material.opacity=1)}),e.current.add(t),h()}},children:"Place"}),(0,r.jsx)("button",{onClick:h,children:"Cancel"})]})]})}},912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return i}});let r=n(5592);function i(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new r.BailoutToCSRError(t);return n}},1481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let r=n(7437),i=n(8512);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,i.getExpectedRequestStore)("next/dynamic css"),l=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,r.jsx)(r.Fragment,{children:l.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[689,971,23,744],function(){return e(e.s=171)}),_N_E=e.O()}]);